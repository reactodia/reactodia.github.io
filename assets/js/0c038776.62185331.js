"use strict";(self.webpackChunk_reactodia_reactodia_github_io=self.webpackChunk_reactodia_reactodia_github_io||[]).push([[87123],{1848:(e,t,a)=>{a.d(t,{U:()=>c,y:()=>l});var r=a(34164),n=(a(77810),a(38410)),s=a(18576);const o={inline:"inline_KKeb",fullSize:"fullSize_xfsN"};var i=a(64922);function l(){return(0,i.jsx)(s.A,{children:(0,i.jsx)("meta",{name:"viewport",content:"initial-scale=1, interactive-widget=resizes-content"})})}function c(e){const{fullSize:t,height:a,children:s}=e,l={"--inline-reactodia-height":t?"auto":a};return(0,i.jsx)("div",{className:(0,r.default)(t?o.fullSize:o.inline),style:l,children:(0,i.jsx)(n.A,{children:()=>(0,i.jsx)(i.Fragment,{children:s})})})}},2369:(e,t,a)=>{a.d(t,{V:()=>d});var r,n=a(77810),s=a(43946);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o.apply(null,arguments)}const i=({title:e,titleId:t,...a})=>n.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",viewBox:"0 0 16 16","aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,r||(r=n.createElement("path",{d:"M4.708 5.578 2.061 8.224l2.647 2.646-.708.708-3-3V7.87l3-3zm7-.708L11 5.578l2.647 2.646L11 10.87l.708.708 3-3V7.87zM4.908 13l.894.448 5-10L9.908 3z"}))),l={viewSource:"viewSource_fiKn",label:"label_vLkb"};var c=a(64922);function d(e){const{target:t}=e;return(0,c.jsxs)(s.A,{className:l.viewSource,to:t,title:"View source code for the playground page",children:[(0,c.jsx)(i,{width:24,height:24}),(0,c.jsx)("span",{className:l.label,children:"View Source"})]})}},30498:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var r=a(38410),n=a(7225),s=a(1848),o=a(2369),i=a(64922);function l(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.y,{}),(0,i.jsxs)(n.A,{title:"Playground: Graph Authoring",noFooter:!0,children:[(0,i.jsx)(r.A,{children:()=>{const{PlaygroundGraphAuthoring:e}=a(96767);return(0,i.jsx)(s.U,{fullSize:!0,children:(0,i.jsx)(e,{})})}}),(0,i.jsx)(o.V,{target:"/docs/examples/graph-authoring"})]})]})}},66446:(e,t,a)=>{a.d(t,{j:()=>o});a(77810);var r=a(96333),n=a(2519),s=a(64922);function o(){const{model:e,editor:t,overlay:a}=r.useWorkspace();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.ToolbarActionOpen,{hotkey:"Mod+O",fileAccept:".json",onSelect:async t=>{const n=new Map;for(const a of e.elements)for(const e of r.iterateEntitiesOf(a))n.set(e.id,e);const s=a.startTask({title:"Importing a layout from file"});try{const a=await t.text(),r=JSON.parse(a);await e.importLayout({dataProvider:e.dataProvider,diagram:r,preloadedElements:n,validateLinks:!0})}catch(o){s.setError(new Error("Failed to load specified file with a diagram layout.",{cause:o}))}finally{s.end()}},children:"Open diagram from file"}),(0,s.jsx)(r.ToolbarActionSave,{mode:"layout",hotkey:"Mod+S",onSelect:()=>{const t=e.exportLayout(),a=JSON.stringify(t),r=new Blob([a],{type:"application/json"}),s=(new Date).toISOString().replaceAll(/[Z\s:-]/g,"");(0,n.saveAs)(r,`reactodia-diagram-${s}.json`)},children:"Save diagram to file"}),t.inAuthoringMode?(0,s.jsx)(r.ToolbarActionSave,{mode:"authoring",onSelect:()=>{const e=t.authoringState;console.log("Authoring state:",e),alert("Please check browser console for result")},children:"Persist changes to data"}):null,(0,s.jsx)(r.ToolbarActionClearAll,{}),(0,s.jsx)(r.ToolbarActionExport,{kind:"exportRaster"}),(0,s.jsx)(r.ToolbarActionExport,{kind:"exportSvg"}),(0,s.jsx)(r.ToolbarActionExport,{kind:"print",hotkey:"Mod+P"})]})}},96767:(e,t,a)=>{a.r(t),a.d(t,{PlaygroundGraphAuthoring:()=>m});var r=a(77810),n=a(96333),s=a(90585);const o=u("http://www.w3.org/2002/07/owl#",["Class","AnnotationProperty","DatatypeProperty","ObjectProperty"]),i=u("http://www.w3.org/2000/01/rdf-schema#",["comment","domain","range","seeAlso","subClassOf","subPropertyOf"]),l=50;class c extends n.BaseMetadataProvider{propertyTypes=[o.AnnotationProperty,o.DatatypeProperty,o.ObjectProperty];editableTypes=new Set([o.Class,...this.propertyTypes]);editableRelations=new Set([i.domain,i.range]);literalLanguages=["de","en","es","ru","zh"];constructor(){super({getLiteralLanguages:()=>this.literalLanguages,createEntity:async(e,{signal:t})=>{await n.delay(l,{signal:t});const a=Math.floor(4294967296*(1+Math.random())).toString(16).substring(1),r=n.Rdf.getLocalName(e)??"Entity";return{id:`${e}_${a}`,types:[e],properties:{[n.rdfs.label]:[n.Rdf.DefaultDataFactory.literal(`New ${r}`)]}}},createRelation:async(e,t,a,{signal:r})=>(await n.delay(l,{signal:r}),{sourceId:e.id,targetId:t.id,linkTypeId:a,properties:{}}),canConnect:async(e,t,a,{signal:r})=>{await n.delay(l,{signal:r});const s=[],c=(e,t,r)=>{const n=a?t.filter((e=>e===a)):t,o=a?r.filter((e=>e===a)):r;e.length>0&&(n.length>0||o.length>0)&&s.push({targetTypes:new Set(e),outLinks:n,inLinks:o})};if(p(e,o.Class)){p(t,o.Class)&&c([o.Class],[i.subClassOf],[i.subClassOf]);const e=this.propertyTypes.filter((e=>p(t,e)));e.length>0&&c(e,[],[i.domain,i.range])}const d=this.propertyTypes.filter((t=>p(e,t)));if(d.length>0){for(const e of d)p(t,e)&&c([e],[i.subPropertyOf],[i.subPropertyOf]);p(t,o.Class)&&c([o.Class],[i.domain,i.range],[])}return s},canModifyEntity:async(e,{signal:t})=>{await n.delay(l,{signal:t});const a=e.types.some((e=>this.editableTypes.has(e)));return{canChangeIri:e.types.includes(o.Class),canEdit:a,canDelete:a}},canModifyRelation:async(e,t,a,r)=>{switch(await n.delay(l,{signal:r.signal}),e.linkTypeId){case i.domain:case i.range:case i.subClassOf:case i.subPropertyOf:return{canChangeType:!0,canEdit:this.editableRelations.has(e.linkTypeId),canDelete:!0};default:return{}}},getEntityShape:async(e,{signal:t})=>{await n.delay(l,{signal:t});const a=new Map;return e.some((e=>this.editableTypes.has(e)))&&(a.set(i.comment,{valueShape:{termType:"Literal"}}),a.set(n.rdfs.label,{valueShape:{termType:"Literal"}}),a.set(n.schema.thumbnailUrl,{valueShape:{termType:"NamedNode"},maxCount:1}),a.set(i.seeAlso,{valueShape:{termType:"NamedNode"}})),{properties:a}},getRelationShape:async(e,{signal:t})=>{await n.delay(l,{signal:t});const a=new Map;return this.editableRelations.has(e)&&a.set(i.comment,{valueShape:{termType:"Literal"}}),{properties:a}},filterConstructibleTypes:async(e,{signal:t})=>(await n.delay(l,{signal:t}),new Set(Array.from(e).filter((e=>this.editableTypes.has(e)))))})}}class d{async validate(e){const t=[];e.target.types.includes(o.Class)&&e.state.links.forEach((a=>{"relationAdd"===a.type&&a.data.sourceId===e.target.id&&(t.push({type:"link",target:a.data,severity:"error",message:"Cannot add any new link from a Class"}),t.push({type:"element",target:e.target.id,severity:"warning",message:`Cannot create <${a.data.linkTypeId}> link from a Class`}))})),e.state.elements.has(e.target.id)&&e.target.types.includes(o.ObjectProperty)&&(e.outboundLinks.some((e=>e.linkTypeId===i.subPropertyOf))||t.push({type:"element",target:e.target.id,severity:"info",message:"It might be a good idea to make the property a sub-property of another"}));for(const a of e.outboundLinks){const{[i.comment]:e}=a.properties;e&&!e.every((e=>"Literal"===e.termType&&e.language))&&t.push({type:"link",target:a,severity:"error",message:"rdfs:comment value should have a language"})}return await n.delay(l,{signal:e.signal}),{items:t}}}function u(e,t){const a=Object.create(null);for(const r of t)a[r]=e+r;return a}function p(e,t){return Boolean(!e||e.types.includes(t))}var g=a(66446),h=a(64922);const y=n.defineLayoutWorker((()=>new Worker(new URL(a.p+a.u(11587),a.b))));function m(){const{defaultLayout:e}=n.useWorker(y),[t,a]=r.useState({type:"url",url:"https://reactodia.github.io/resources/orgOntology.ttl"}),{onMount:o}=n.useLoadedWorkspace((async({context:e,signal:a})=>{const{model:r,editor:o,getCommandBus:i,performLayout:l}=e;let c;if(o.setAuthoringMode(!0),"url"===t.type){const e=await fetch(t.url,{signal:a});c=await e.text()}else c=t.data;const d=new n.RdfDataProvider;try{d.addGraph((new s.A).parse(c))}catch(u){throw new Error("Error parsing RDF graph data",{cause:u})}if(await r.importLayout({dataProvider:d,signal:a}),"url"===t.type){const e=[r.createElement("http://www.w3.org/ns/org#Organization"),r.createElement("http://www.w3.org/ns/org#FormalOrganization"),r.createElement("http://www.w3.org/ns/org#hasMember"),r.createElement("http://www.w3.org/ns/org#hasSubOrganization"),r.createElement("http://www.w3.org/ns/org#subOrganizationOf"),r.createElement("http://www.w3.org/ns/org#unitOf")];await Promise.all([r.requestElementData(e.map((e=>e.iri))),r.requestLinks()]),await l({signal:a})}else i(n.UnifiedSearchTopic).trigger("focus",{sectionKey:"elementTypes"})}),[t]),[i]=r.useState((()=>new c)),[l]=r.useState((()=>new d)),[u]=r.useState((()=>new f));return(0,h.jsx)(n.Workspace,{ref:o,defaultLayout:e,metadataProvider:i,validationProvider:l,renameLinkProvider:u,children:(0,h.jsx)(n.DefaultWorkspace,{menu:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(b,{onOpen:a}),(0,h.jsx)(g.j,{})]}),visualAuthoring:{inputResolver:(e,t)=>"http://www.w3.org/2000/01/rdf-schema#comment"===e?(0,h.jsx)(n.FormInputList,{...t,valueInput:w}):void 0}})})}class f extends n.RenameLinkToLinkStateProvider{canRename(e){return"http://www.w3.org/2000/01/rdf-schema#subClassOf"===e.typeId}}function w(e){return(0,h.jsx)(n.FormInputText,{...e,multiline:!0})}function b(e){const{onOpen:t}=e;return(0,h.jsx)(n.ToolbarActionOpen,{fileAccept:".ttl",onSelect:async e=>{const a=await e.text();t({type:"data",data:a})},children:"Load RDF (Turtle) data"})}}}]);