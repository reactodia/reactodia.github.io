(()=>{"use strict";var e,t={7434:(e,t,n)=>{var a=n(5893),o=n(7294),s=n(3607),r=n(1350);(0,r.pT)((0,a.jsx)((function(){const e=o.useRef(null);return o.useEffect((()=>{const t=new AbortController,{model:n}=e.current.getContext(),a=new s.Qw({endpointUrl:"https://query.wikidata.org/sparql",imagePropertyUris:["http://www.wikidata.org/prop/direct/P18","http://www.wikidata.org/prop/direct/P154"],queryMethod:"GET"},{...s.uw,linkTypesStatisticsQuery:""}),o=new s.KW({baseProvider:a,dbName:"reactodia-wikidata-cache",closeSignal:t.signal}),i=(0,r.Q4)();return n.importLayout({diagram:i,dataProvider:o,validateLinks:!0,signal:t.signal}),()=>t.abort()}),[]),(0,a.jsx)(s.j$,{ref:e,onIriClick:({iri:e})=>window.open(e),children:(0,a.jsx)(s.ii,{toolbar:{menu:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Tn,{}),(0,a.jsx)(s.JE,{title:"Clear locally-cached data previously fetched from Wikidata",onSelect:()=>{const{model:{dataProvider:t}}=e.current.getContext();t instanceof s.KW&&t.clearCache()},children:"Clear Wikidata cache"})]}),languages:[{code:"de",label:"Deutsch"},{code:"en",label:"english"},{code:"es",label:"español"},{code:"fr",label:"français"},{code:"ja",label:"日本語"},{code:"hi",label:"हिन्दी"},{code:"pt",label:"português"},{code:"ru",label:"русский"},{code:"zh",label:"汉语"}]}})})}),{}))},5794:(e,t,n)=>{n.d(t,{K:()=>o});const a=["elementType","element","link","direction","text","limit"];class o{static DB_VERSION=2;baseProvider;dbName;cacheTextLookups;closeSignal;openedDb;deleteRequest;constructor(e){this.baseProvider=e.baseProvider,this.dbName=e.dbName,this.cacheTextLookups=e.cacheTextLookups??!1,this.closeSignal=e.closeSignal,this.closeSignal.addEventListener("abort",this.onClose)}get factory(){return this.baseProvider.factory}clearCache(){return this.deleteRequest=this.deleteDatabase(),this.deleteRequest}async deleteDatabase(){await this.closeDatabase(),await i(indexedDB.deleteDatabase(this.dbName))}async openDb(){return this.deleteRequest&&await this.deleteRequest.catch((()=>{})),this.openedDb||(this.openedDb=new Promise(((e,t)=>{const n=indexedDB.open(this.dbName,o.DB_VERSION);n.onupgradeneeded=e=>{const t=n.result;if(e.newVersion!==e.oldVersion)for(const e of t.objectStoreNames)t.deleteObjectStore(e);t.objectStoreNames.contains("knownElementTypes")||t.createObjectStore("knownElementTypes",{keyPath:"id"}),t.objectStoreNames.contains("knownLinkTypes")||t.createObjectStore("knownLinkTypes",{keyPath:"id"}),t.objectStoreNames.contains("elementTypes")||t.createObjectStore("elementTypes",{keyPath:"id"}),t.objectStoreNames.contains("linkTypes")||t.createObjectStore("linkTypes",{keyPath:"id"}),t.objectStoreNames.contains("propertyTypes")||t.createObjectStore("propertyTypes",{keyPath:"id"}),t.objectStoreNames.contains("elements")||t.createObjectStore("elements",{keyPath:"id"}),t.objectStoreNames.contains("connectedLinkStats")||t.createObjectStore("connectedLinkStats",{keyPath:"elementId"}),t.objectStoreNames.contains("lookup")||t.createObjectStore("lookup",{keyPath:a})},n.onsuccess=t=>{const a=n.result;e(a)},n.onerror=e=>{t(n.error)}}))),this.openedDb}onClose=async()=>{this.closeSignal.removeEventListener("abort",this.onClose),this.closeDatabase()};async closeDatabase(){this.openedDb&&((await this.openedDb).close(),this.openedDb=void 0)}async knownElementTypes(e){const t=await this.openDb(),n=await s(t,"knownElementTypes","knownElementTypes",(async t=>({id:t,value:await this.baseProvider.knownElementTypes(e)})));return l(n.value.elementTypes.values(),this.factory),n.value}async knownLinkTypes(e){const t=await this.openDb(),n=await s(t,"knownLinkTypes","knownLinkTypes",(async t=>({id:t,value:await this.baseProvider.knownLinkTypes(e)})));return l(n.value.values(),this.factory),n.value}async elementTypes(e){const{classIds:t,signal:n}=e,a=await this.openDb(),o=await r(a,"elementTypes",t,(async e=>await this.baseProvider.elementTypes({classIds:e,signal:n})));return l(o.values(),this.factory),o}async propertyTypes(e){const{propertyIds:t,signal:n}=e,a=await this.openDb(),o=await r(a,"propertyTypes",t,(async e=>await this.baseProvider.propertyTypes({propertyIds:e,signal:n})));return l(o.values(),this.factory),o}async linkTypes(e){const{linkTypeIds:t,signal:n}=e,a=await this.openDb(),o=await r(a,"linkTypes",t,(async e=>await this.baseProvider.linkTypes({linkTypeIds:e,signal:n})));return l(o.values(),this.factory),o}async elements(e){const{elementIds:t,signal:n}=e,a=await this.openDb(),o=await r(a,"elements",t,(async e=>await this.baseProvider.elements({elementIds:e,signal:n})));return l(o.values(),this.factory),d(o.values(),this.factory),o}links(e){return this.baseProvider.links(e)}async connectedLinkStats(e){const{elementId:t,inexactCount:n,signal:a}=e,o=await this.openDb();return(await s(o,"connectedLinkStats",t,(async e=>({elementId:e,stats:await this.baseProvider.connectedLinkStats({elementId:e,inexactCount:n,signal:a})})))).stats}async lookup(e){if(!this.cacheTextLookups&&void 0!==e.text)return this.baseProvider.lookup(e);const t=[e.elementTypeId??"",e.refElementId??"",e.refElementLinkId??"",e.linkDirection??"",e.text??"",void 0===e.limit?"":null===e.limit?"null":String(e.limit)],n=await this.openDb(),a=await s(n,"lookup",t,(async([t,n,a,o,s,r])=>({elementType:t,element:n,link:a,direction:o,text:s,limit:r,result:await this.baseProvider.lookup(e)}))),o=a.result.map((e=>e.element));return l(o,this.factory),d(o,this.factory),a.result}}async function s(e,t,n,a){{const a=e.transaction(t,"readonly"),o=a.objectStore(t),s=await i(o.get(n));if(a.commit(),s)return s}const o=c(await a(n)),s=e.transaction(t,"readwrite"),r=s.objectStore(t);return await i(r.put(o)),s.commit(),o}async function r(e,t,n,a){const o=new Map,s=[];if(n.length>0){const a=e.transaction(t,"readonly"),r=a.objectStore(t);await function(e,t,n){return new Promise(((a,o)=>{let s=0,r=!1;for(const i of t){const c=e.get(i);c.onsuccess=()=>{if(!r){s++;try{n(c.result,i)}catch(e){r=!0,o(e)}s===t.length&&a()}},c.onerror=()=>{r=!0,o(c.error)}}}))}(r,n,((e,t)=>{const n=e;n?o.set(t,n):s.push(t)})),a.commit()}if(s.length>0){const n=await a(s),l=[];for(const[e,t]of n){const n=c(t);o.set(e,n),l.push(n)}const d=e.transaction(t,"readwrite"),p=d.objectStore(t);await(r=p,i=l,new Promise(((e,t)=>{const n=[];let a=!1;for(const o of i){const s=r.put(o);s.onsuccess=()=>{a||(n.push(s.result),n.length===i.length&&e(n))},s.onerror=()=>{a=!0,t(s.error)}}}))),d.commit()}var r,i;return o}function i(e){return new Promise(((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=()=>n(e.error)}))}function c(e){return JSON.parse(JSON.stringify(e))}function l(e,t){for(const n of e)n.label=n.label.map((e=>p(e,t)))}function d(e,t){for(const n of e)for(const e in n.properties)if(Object.prototype.hasOwnProperty.call(n.properties,e)){const a=n.properties[e];a&&(n.properties[e]=a.map((e=>p(e,t))))}}function p(e,t){switch(e.termType){case"NamedNode":return t.namedNode(e.value);case"Literal":return t.literal(e.value,e.language?e.language:t.namedNode(e.datatype.value));default:return e}}},3607:(e,t,n)=>{n.d(t,{C5:()=>l.C,JE:()=>r.JE,KW:()=>a.K,PN:()=>r.PN,Qw:()=>o.Q,ii:()=>i.i,j$:()=>c.j,mn:()=>r.mn,rH:()=>r.rH,uQ:()=>r.uQ,uw:()=>s.uw}),n(9224),n(6726),n(8390),n(8742),n(8312),n(8051),n(6239);var a=n(5794),o=(n(3383),n(5434),n(9929),n(8718)),s=n(4849),r=(n(861),n(201),n(9570),n(9149),n(4315),n(6885),n(4698),n(6639),n(7900),n(4149),n(577),n(8812),n(8254),n(4995),n(2466),n(761),n(5426),n(9758),n(5020),n(1e3),n(5311),n(8729),n(6103),n(3797),n(6104),n(1449),n(1628),n(9168),n(3546),n(4805),n(290),n(1938),n(280),n(7471),n(2329),n(8524),n(9238),n(8446)),i=(n(6091),n(8143)),c=(n(6377),n(260)),l=n(8599);n(2072),n(2739),n(9958)}},n={};function a(e){var o=n[e];if(void 0!==o)return o.exports;var s=n[e]={id:e,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.exports}a.m=t,e=[],a.O=(t,n,o,s)=>{if(!n){var r=1/0;for(d=0;d<e.length;d++){for(var[n,o,s]=e[d],i=!0,c=0;c<n.length;c++)(!1&s||r>=s)&&Object.keys(a.O).every((e=>a.O[e](n[c])))?n.splice(c--,1):(i=!1,s<r&&(r=s));if(i){e.splice(d--,1);var l=o();void 0!==l&&(t=l)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[n,o,s]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.j=797,a.p="",(()=>{a.b=document.baseURI||self.location.href;var e={797:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var o,s,[r,i,c]=n,l=0;if(r.some((t=>0!==e[t]))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(c)var d=c(a)}for(t&&t(n);l<r.length;l++)s=r[l],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(d)},n=self.webpackChunk_reactodia_workspace=self.webpackChunk_reactodia_workspace||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.nc=void 0;var o=a.O(void 0,[351],(()=>a(7434)));o=a.O(o)})();